@using Blazored.FluentValidation
@using Home.Recipes.WebClient.Services.Recipes.Models
@using System.Text.Json

<EditForm Model="_command" OnSubmit="Submit" FormName="create_recipe">
    <FluentValidationValidator />

    <div class="mb-4">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="recipe_name">
            Name
        </label>
        <InputText @bind-Value="@_command.Name"
                   class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   id="recipe_name"
                   placeholder="Recipe name" />
    </div>

    <div class="mb-4">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="recipe_description">
            Description
        </label>
        <InputTextArea @bind-Value="@_command.Description"
                       class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                       id="recipe_description"
                       placeholder="Description" />
    </div>

    <div class="mb-4">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="recipe_preparationTime">
            Preparation time (in minutes)
        </label>

        <InputNumber @bind-Value="@_command.PreparationTimeInMinutes"
                   class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   id="recipe_preparationTime" />
    </div>

    <div class="mb-4">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="recipe_cookingTime">
            Cooking time
        </label>
        <InputNumber @bind-Value="@_command.CookingTimeInMinutes"
                     class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                     id="recipe_cookingTime" />
    </div>

    <div>
        <button type="submit">Submit</button>
    </div>
</EditForm>

@code {
    private CreateRecipeCommand _command = new(string.Empty, string.Empty);

    private async Task Submit()
    {
        var json = JsonSerializer.Serialize(_command);
        Console.WriteLine(json);
    }    
}
